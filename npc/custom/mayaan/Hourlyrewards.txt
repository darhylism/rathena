-	script	hourly_point_main	-1,{
   
    OnInit:
		.max_minute = 720;
        .npc_name$ = strnpcinfo(3);
        bindatcmd "hreward",.npc_name$+"::OnAtcommand";
		bindatcmd "Hreset", strnpcinfo(0)+"::OnHCommand", 99,100;
        end;
       
    OnAtcommand:
		dispbottom "Accumulated time: "+#daily_minute_count+" / "+.max_minute+" minute(s) - "+ ( ( #daily_minute_count < .max_minute )?" In Progress":"Completed" );
		dispbottom "Total Hourly Points: "+#HR_COIN+"";
        end;
		
	OnHCommand:
		if ( compare( .@atcmd_parameters$, "on" ) ) goto L_startH;
		else if ( compare( .@atcmd_parameters$, "off" ) ) goto L_EndH;
		else {
		dispbottom "type - '@Hreset on' to start the event";
		dispbottom "type - '@Hreset off' to end the event";
		}
	end;
	
L_startH:
		query_sql("UPDATE `acc_reg_num` SET `value` = 0 WHERE `key` = '#lastpickfallen' AND `account_id` IN ( SELECT `account_id` FROM `char` GROUP BY `account_id` ) " );
		announce "An admin Manually Reseted Falled Hero Reward, You can now claim it again.",bc_all,0x00FF00,FW_NORMAL,25;
		addrid(0);
		#lastpickfallen = 0;
		end;

L_EndH:
end;


	OnClock0001:
//	OnClock2032:
//		query_sql( "DELETE FROM acc_reg_num` WHERE `key` = '#daily_minute_count' AND `account_id` IN ( SELECT `account_id` FROM `char` WHERE `login` = 0 GROUP BY `account_id` ) " );
//		query_sql( "DELETE FROM acc_reg_num` WHERE `key` = '#lastTimeSpin' AND `account_id` IN ( SELECT `account_id` FROM `char` WHERE `login` = 0 GROUP BY `account_id` ) " );
		query_sql("UPDATE `acc_reg_num` SET `value` = 0 WHERE `key` = '#lastpickfallen' AND `account_id` IN ( SELECT `account_id` FROM `char` GROUP BY `account_id` ) " );
		sleep 200;
		query_sql("UPDATE `acc_reg_num` SET `value` = 0 WHERE `key` = '#daily_minute_count' AND `account_id` IN ( SELECT `account_id` FROM `char` GROUP BY `account_id` ) " );
		sleep 200;
		query_sql("UPDATE `char_reg_num` SET `value` = 0 WHERE `key` = 'rbdaily' AND `char_id` IN ( SELECT `char_id` FROM `char` GROUP BY `char_id` ) " );
		sleep 200;
		announce "It is 12:01AM Server time. Fallen Hero Rewards, Hourly Points and other cooldowns have been reseted, Please relog to avoid errors.",bc_all,0x00FF00,FW_NORMAL,25;
		sleep 200;
		addrid(0);
		#lastpickfallen = 0;
		#daily_minute_count = 0;
		rbdaily = 0;
		end;
	   
    OnUpdate:
		if(checkvending() >= 1) {
			dispbottom "The hourly points event stopped because you were vending. Please relog if you wish to start again.";
			stopnpctimer;
			end;
			}
        #daily_minute_count++;
        deltimer .npc_name$+"::OnUpdate";
        switch ( #daily_minute_count ) {
            default:
                break;
            case 60: // 60 minutes
                #HR_COIN += 5;
				dispbottom "You received 5 Hourly points by staying ingame for 1 hour";
				dispbottom "The hourly points system has started please continue to be online to gain rewards.";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";
                break;
            case 120: // 120 minutes
                #HR_COIN += 10;
				dispbottom "You received 10 Hourly points due to playing for 2 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";
                break;
            case 180: // 180 minutes
                #HR_COIN += 15;
				dispbottom "You received 15 Hourly points due to playing for 3 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";				
                break;
            case 240: // 240 minutes
                #HR_COIN += 20;
				dispbottom "You received 20 Hourly points due to playing for 4 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";				
                break;
            case 300: // 300 minutes
                #HR_COIN += 25;
				dispbottom "You received 25 Hourly points due to playing for 5 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";				
                break;
            case 360: // 360 minutes
                #HR_COIN += 30;
				dispbottom "You received 30 Hourly points due to playing for 6 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";
                break;
            case 420: // 420 minutes
                #HR_COIN += 35;
				dispbottom "You received 35 Hourly points due to playing for 7 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";				
                break;
            case 480: // 480 minutes
                #HR_COIN += 40;
				dispbottom "You received 40 Hourly points due to playing for 8 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";				
                break;
            case 540: // 540 minutes
                #HR_COIN += 45;
				dispbottom "You received 45 Hourly points due to playing for 9 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";				
                break;
            case 600: // 600 minutes
                #HR_COIN += 50;
				dispbottom "You received 50 Hourly points due to playing for 10 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";				
                break;
            case 660: // 660 minutes
                #HR_COIN += 55;
				dispbottom "You received 55 Hourly points due to playing for 11 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";				
                break;
            case 720: // 720 minutes
                #HR_COIN += 60;
				dispbottom "You received 60 Hourly points due to playing for 12 consecutive hours";
				dispbottom "Hourly Points: Please use @hreward if you want to check the time accumulate per minute";
                break;
        }
       
    OnPCLoginEvent:
		dispbottom "Accumulated time: "+#daily_minute_count+" minute(s)";
		if ( #daily_minute_count < .max_minute ) {
			addtimer ( 60 * 1000 ), .npc_name$+"::OnUpdate";
		}
        end;
}

prontera,147,173,3	script	Hourly Shop#PRT	716,{
	mes "[Boy]";
	mes "I come from Valhalla to aid you.";
	mes "what do you want to buy?.";
	next;
	switch(select("Cards:Equipments:Usable:ETC:Close")) {
		case 1:
			close2;
			callshop "1shop#hourly", 1;
			end;
		case 2:
			close2;
			callshop "2shop#hourly", 1;
			end;
		case 3:
			close2;
			callshop "3shop#hourly", 1;
			end;
		case 4:
			close2;
			callshop "4shop#hourly", 1;
			end;
		default:
			close;
	}
}
ma_in01,31,93,3	duplicate(Hourly Shop#PRT)	Hourly Shop#HED	716

-	pointshop	1shop#hourly	-1,#HR_COIN,4128:390,4047:300,4174:300,4305:75,4142:75,4035:30,4058:30,4133:30,35000:250,35001:250,35002:250,35003:250

-	pointshop	2shop#hourly	-1,#HR_COIN,2702:1000,2124:50,2357:390,2524:390,2421:390,2115:150,2767:3,2769:3,2768:3,2771:3,2765:3,2766:3,2770:3,2710:5000,13953:25,12106:390,5463:100,5594:100,5325:100,5388:75,5286:75,18656:1000,5372:25000

-	pointshop	3shop#hourly	-1,#HR_COIN,13534:1,13810:2,13995:10,35049:390,12578:100,14533:10,12210:300,12412:500,12214:50,12302:15,616:3,678:5,12172:10,12162:10,12182:10,12202:150,12204:150,12205:150,12203:150,12207:150,12206:150

-	pointshop	4shop#hourly	-1,#HR_COIN,7776:1000,7620:100,7619:100,13889:5,13890:5